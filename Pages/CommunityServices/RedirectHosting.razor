@page "/community-services/redirect-hosting"
@inject HttpClient HttpClient

<PageTitle>Redirect Hosting</PageTitle>
<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudBreadcrumbs Items="@breadcrumbs" Class="pa-0" />
    <MudDivider Class="my-2" />
    <MudStack>
        <MudMarkdown Value="@markdown" />
        <MudBreadcrumbs Items="@([
            new("PlumbBuddy-Pages", "https://github.com/Llama-Logic/PlumbBuddy-Pages", icon: MaterialDesignIcons.Normal.SourceRepository),
            new("wwwroot", "https://github.com/Llama-Logic/PlumbBuddy-Pages/blob/main/wwwroot", icon: MaterialDesignIcons.Normal.Folder),
            new("community-data", "https://github.com/Llama-Logic/PlumbBuddy-Pages/blob/main/wwwroot/community-data", icon: MaterialDesignIcons.Normal.Folder),
            new("redirects.yml", "https://github.com/Llama-Logic/PlumbBuddy-Pages/blob/main/wwwroot/community-data/redirects.yml", icon: MaterialDesignIcons.Normal.FileTable)
        ])" Class="pa-0" />
        <MudBreadcrumbs Items="@([
            new("PlumbBuddy-Pages", "https://github.com/Llama-Logic/PlumbBuddy-Pages", icon: MaterialDesignIcons.Normal.SourceRepository),
            new("site", "https://github.com/Llama-Logic/PlumbBuddy-Pages/blob/main/site", icon: MaterialDesignIcons.Normal.Folder),
            new("wwwroot", "https://github.com/Llama-Logic/PlumbBuddy-Pages/blob/main/site/wwwroot", icon: MaterialDesignIcons.Normal.Folder),
            new("community-data", "https://github.com/Llama-Logic/PlumbBuddy-Pages/blob/main/site/wwwroot/community-data", icon: MaterialDesignIcons.Normal.Folder),
            new("redirects.yml", "https://github.com/Llama-Logic/PlumbBuddy-Pages/blob/main/site/wwwroot/community-data/redirects.yml", icon: MaterialDesignIcons.Normal.FileTable)
        ])" Class="pa-0" />
        <MudDivider Class="my-2" />
        <MudTable T="KeyValuePair<string, Uri>" Items="redirects" Breakpoint="Breakpoint.Md" Dense Filter="IncludeRedirect" Class="mt-2">
            <ToolBarContent>
                <MudTextM3 Typo="TypoM3.Title" Style="width: 80%;">Current Redirects</MudTextM3>
                <MudSpacer />
                <MudTextField @bind-Value="@redirectsSearchText" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0" Immediate Clearable DebounceInterval="250" />
            </ToolBarContent>
            <HeaderContent>
                <MudTh>Name</MudTh>
                <MudTh>URL</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Name">
                    <MudTextM3>@context.Key</MudTextM3>
                </MudTd>
                <MudTd DataLabel="URL">
                    <MudLink Href="@context.Value.ToString()" Target="_blank">@context.Value</MudLink>
                </MudTd>
            </RowTemplate>
            <PagerContent>
                <MudTablePager />
            </PagerContent>
        </MudTable>
    </MudStack>
</MudContainer>
